record(bi, PLC-DBE:status) {
  field(DTYP, "S7plc stat")
  field(INP, "@PLC:DBE")
  field(SCAN, "I/O Intr")
  field(ZNAM, "disconnected")
  field(ONAM, "connected")
  field(ZSV, "MAJOR")
  field(FLNK, "PLC-DBE:status-counter")
}

record(calc, PLC-DBE:status-counter) {
  field(INPA, "PLC-DBE:status-counter")
  field(CALC, "A+1")
  field(FLNK, "PLC-DBE:disconnect-counter")
}


record(calc, PLC-DBE:disconnect-counter) {
  field(INPA, "PLC-DBE:status")
  field(INPB, "PLC-DBE:disconnect-counter.LA")
  field(INPC, "PLC-DBE:disconnect-counter")
  field(CALC, "(A=0&&B=1)?C+1:C")
}

record(waveform, PLC:DBE:Status:Buffer) {
  field(DTYP, "S7plc")
  field(INP, "@PLC:DBE/0 T=UINT16")
  field(FTVL, "SHORT")
  field(NELM, "86")
  field(SCAN, "I/O Intr")
}

 record(mbbi, "HPRF-DBE:Ampl:sType") {
  field (DTYP, "S7plc")
  field (INP,  "@$PLC:DBE/13 T=BYTE")
  field (SCAN, "I/O Intr")
  field (NOBT, "2")
  field (SHFT, "0")
  field (ZRVL, "0")
  field (ONVL, "1")
  field (TWVL, "2")
  field (ZRST, "Normal")
  field (ONST, "Slave")
  field (TWST, "Master")
 }
